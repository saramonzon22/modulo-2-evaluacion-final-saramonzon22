"use strict";const inputSearch=document.querySelector(".input-search-js"),searchButton=document.querySelector(".button-js-search"),resetButton=document.querySelector(".button-js-reset"),searchResult=document.querySelector(".search-js"),favouriteList=document.querySelector(".favourites"),animeList=document.querySelector(".list-anime-js"),close=document.querySelector(".close");let animes=[],favorites=[];const animeRender=e=>{let t="",i="";for(const a of e){-1!==favorites.findIndex(e=>e.mal_id===a.mal_id)?(i="fav",t+=`<li class="list-anime list-anime-js ${i}" id="${a.mal_id}">`,t+=`<div class="img-cont"><h2 class="title2">${a.title}</h2>`,t+='<i class="fa-solid fa-xmark close"></i></div>',"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==a.images.jpg.small_image_url?t+=`<img class="img-list" src=${a.images.jpg.image_url}>`:t+="<img class=\"img-list\" src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'>",t+="</li>"):(i="",t+=`<li class="list-anime list-anime-js ${i}" id="${a.mal_id}">`,t+=`<h2 class="title2">${a.title}</h2>`,"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==a.images.jpg.small_image_url?t+=`<img class="img-list" src=${a.images.jpg.image_url}>`:t+="<img class=\"img-list\" src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'>",t+="</li>")}return t},renderAnimeSearch=()=>{let e=animeRender(animes);searchResult.innerHTML=e,listenerSerie()},handleSearch=e=>{e.preventDefault();const t=inputSearch.value.toLowerCase();getDataAPI(t)},handleClick=e=>{const t=parseInt(e.currentTarget.id),i=animes.find(e=>e.mal_id===t),a=favorites.findIndex(e=>e.mal_id===t);-1===a?favorites.push(i):favorites.splice(a,1),animeRenderFav()},animeRenderFav=()=>{let e=animeRender(favorites);favouriteList.innerHTML=e,localStorage.setItem("favorites",JSON.stringify(favorites)),renderAnimeSearch()};function listenerSerie(){const e=document.querySelectorAll(".list-anime-js");for(const t of e)t.addEventListener("click",handleClick)}const getDataAPI=e=>{fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{animes=e.data,renderAnimeSearch()})},dataLS=JSON.parse(localStorage.getItem("favorites"));function initPage(){null!==dataLS?(favorites=dataLS,animeRenderFav()):favouriteList.innerHTML=""}function resetData(){localStorage.removeItem("favorites")}resetButton.addEventListener("click",resetData),searchButton.addEventListener("click",handleSearch),initPage();